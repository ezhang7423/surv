<html lang="en" class="responsive">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="icon" href="favicon.ico">
  <title>Surveys</title>
  <link href="https://studenthealthoc.sa.ucsb.edu/Resources/yui/build/yui-combined.css" rel="stylesheet"><!-- YUICSS -->
  <link href="https://studenthealthoc.sa.ucsb.edu/Resources/stylesheets/themes/bootstrap.cerulean.min.css"
    rel="stylesheet"><!-- THEME -->
  <link href="https://studenthealthoc.sa.ucsb.edu/Resources/stylesheets/plugins/toastr/toastr.min.css" rel="stylesheet">
  <link href="https://studenthealthoc.sa.ucsb.edu/Resources/stylesheets/ie10-viewport-bug-workaround.css"
    rel="stylesheet">
  <link href="https://studenthealthoc.sa.ucsb.edu/bower_components/bootstrap-sidebar/dist/css/sidebar.css"
    rel="stylesheet">
  <link href="https://studenthealthoc.sa.ucsb.edu/bower_components/font-awesome/css/font-awesome.min.css"
    rel="stylesheet" type="text/css">
  <link href="https://studenthealthoc.sa.ucsb.edu/Resources/stylesheets/plugins/bootstrap-datepicker3.min.css"
    rel="stylesheet">
  <link href="https://studenthealthoc.sa.ucsb.edu/Resources/lib/datetimepicker/datetimepicker.css" rel="stylesheet">
  <link href="https://studenthealthoc.sa.ucsb.edu/Resources/stylesheets/responsive.css" rel="stylesheet">
  <link href="https://studenthealthoc.sa.ucsb.edu/Resources/stylesheets/upload.css" rel="stylesheet">
  <!-- <script src="https://static.sa.ucsb.edu/js/SHS/badge.custom.js"></script> -->
  <!-- <script src="https://static.sa.ucsb.edu/js/SHS/survey.custom.js"></script> -->
  <link rel="stylesheet" href="https://static.sa.ucsb.edu/css/SHS/badge.custom.css">

  <script async="" src="//www.google-analytics.com/analytics.js"></script>
  <script>window.lang = { "OpensNewWindow": "Opens a new window", "FormNotSubmitted": "The form was NOT submitted" }</script>
  <script
    data-dapp-detection="">!function () { let e = !1; function n() { if (!e) { const n = document.createElement("meta"); n.name = "dapp-detected", document.head.appendChild(n), e = !0 } } if (window.hasOwnProperty("ethereum")) { if (window.__disableDappDetectionInsertion = !0, void 0 === window.ethereum) return; n() } else { var t = window.ethereum; Object.defineProperty(window, "ethereum", { configurable: !0, enumerable: !1, set: function (e) { window.__disableDappDetectionInsertion || n(), t = e }, get: function () { if (!window.__disableDappDetectionInsertion) { const e = arguments.callee; e && e.caller && e.caller.toString && -1 !== e.caller.toString().indexOf("getOwnPropertyNames") || n() } return t } }) } }();</script>
  <script>window.config = { "basePath": "/", "locale": "en-US", "responsiveMode": true, "dateFormat": "M/d/yyyy", "imageUploadLicensed": true, "navAlerts": true, "activityEnabled": "true", "activitySelector": "a, button, .btn, .fa, td, li", "uploadRejected": "Your filename is too long (50 chars max), your file is too large (4 MB max), or the file is not an image file (.pdf, .jpg, .png, .gif)." };</script>
  <!-- STYLES -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  <script src="Resources/yui/build/yui-combined.js"></script>
  <script src="Resources/js/emf.js"></script><!-- YUIJS -->
  <style type="text/css">
    .hidden {
      display: none;
    }
  </style>

</head>

<body class="SurveyFormsHome yui-skin-sam has-badge">
  <div id="quarantineBadge" class="badge-Green">
    <div style="position: fixed; top: 0; left: 0; width: 100vw; z-index: 9999;">
      <button class="exit btn btn-primary btn-sm pull-right"><i onclick="localStorage.clear(); location.reload()"
          style="font-size: 14px;" class="fa fa-close">reset</i></button>
    </div>
    <input class="hidden" style="margin-top: 30px; color: black;" type="text" id="surv-name-input"
      onkeypress="enterName(event)" placeholder="name e.g. (first last)">

    <div id="surv-picture-input" class="hidden" style="margin-top: 30px; display: flex;"><span
        style="margin-right: 10px; font-size: 18px;">put your image
        here</span><input onchange="encodeImageFileAsURL(this)" type="file" name="img" accept="image/*"></div>

    <p>UCSB COVID-19 Clearance Status</p>
    <h1 style="margin-top: -20px; font-size: 2.75em;">Cleared to be On-Site</h1>
    <div class="studentStatus">STUDENT</div>
    <div id="now" style="font-size: 1.4em">9/25/2021 1:38 PM</div>
    <div id="patInfo" class="row text-center" style="margin-top: 15px;">
      <div class="col-xs-12">
        <img id="surv-picture" src="" alt="Patient Image" style="max-width: 170px; margin-top: -15px;">
      </div>
      <div class="col-xs-12">
        <h3 id="badgename" class="mb-0" style="margin-top: 4px;">
          <strong><span id="surv-first-name"></span> - HE/HIM/HIS <span id="surv-last-name"></span></strong>
        </h3>
      </div>
      <div class="col-xs-12">
        <span id="badgedob" class="ml-2">Feb 3</span>
      </div>
      <div class="col-xs-12">
        <span>#942375</span>
      </div>
    </div>

    <div style="font-size: 0.8em">Next Survey Due: 9/26/2021 1:00 AM</div>
    <div class="badge-mask-language">Mask REQUIRED Indoors</div>
  </div>

  <script src="/wwwroot/lib/jquery/jquery.min.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/activity.js"></script>
  <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
  <script src="/bower_components/bootstrap-sidebar/dist/js/sidebar.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/plugins/bootbox.min.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/ie10-viewport-bug-workaround.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/plugins/jquery.idletimer.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/plugins/jquery.idletimeout.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/plugins/toastr/toastr.min.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/validation/jquery.validate.min.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/plugins/moment/moment-with-locales.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/plugins/moment/moment-timezone.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/plugins/bootstrap-datepicker.min.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/lib/datetimepicker/datetimepicker.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/spin.min.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/plugins.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/main.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/openCommunicator.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/responsive.js"></script>
  <script src="https://studenthealthoc.sa.ucsb.edu/Resources/js/fileUpload.js"></script>
  <script src="/wwwroot/js/builtIn.js"></script>
  <script>
    function encodeImageFileAsURL(element) {
      let file = element.files[0];
      let reader = new FileReader();
      reader.onloadend = function () {
        localStorage.setItem('pictureUrl', reader.result)
        location.reload()

      }
      let r = reader.readAsDataURL(file);
    }

    var dateObj = new Date();
    var month = dateObj.getUTCMonth() + 1; //months from 1-12
    var day = dateObj.getUTCDate();
    var year = dateObj.getUTCFullYear();

    let newdate = month + "/" + day + '/' + year + ' 6:02 AM';
    let timeText = document.querySelector('#now')
    timeText.innerText = newdate


    let firstNameElement = document.querySelector("#surv-first-name")
    let lastNameElement = document.querySelector("#surv-last-name")
    let nameInput = document.querySelector("#surv-name-input")
    let pictureElement = document.querySelector("#surv-picture")
    let pictureInput = document.querySelector("#surv-picture-input")

    let cachedFirstName = localStorage.getItem('firstName')
    let cachedLastName = localStorage.getItem('lastName')
    let cachedImg = localStorage.getItem('pictureUrl')



    function enterName(e) {
      if (event.key == 'Enter') {
        let names = nameInput.value.toUpperCase().split(' ')
        localStorage.setItem('firstName', names[0]);
        localStorage.setItem('lastName', names[1]);
        location.reload()
      }
    }
    // function enterName(e) { if (event.key == 'Enter') { localStorage.setItem('name', nameInput.value) } }
    if (cachedFirstName) {
      firstNameElement.innerText = cachedFirstName
      lastNameElement.innerText = cachedLastName
    } else {
      nameInput.classList.remove('hidden')
    }
    if (cachedImg) {
      pictureElement.src = cachedImg
    } else {
      // console.log(pictureInput)
      pictureInput.classList.remove('hidden')
    }

    // console.log(nameElement)
  </script>
  <script>

      < !--Google Analytics-- >

      (function (i, s, o, g, r, a, m) {
        i[' GoogleAnalyticsObject'] = r; i[r] = i[r] || function () { (i[r].q = i[r].q || []).push(arguments) }, i[r].l = 1 *
          new Date(); a = s.createElement(o), m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g;
        m.parentNode.insertBefore(a, m)
      })(window, document, 'script', '//www.google-analytics.com/analytics.js'
        , 'ga'); ga('create', 'UA-74584394-1', 'auto'); ga('send', 'pageview'); < !--UCSB Functions-- >
          function doesHeaderContainText(text) {
            return document.querySelector('#navbar').textContent.indexOf(text) >=
              0
          }

          < !--Remove Edit Preferred Pronouns(comes from GOLD)-- >
              if (window.location.href.toLowerCase().indexOf("profile.aspx") > 1) {
      document.querySelector('#editPreferredPronouns').remove()
    }

              < !--Change Waiver button-- >
                if (window.location.href.toLowerCase().indexOf("insenrollconditions2.aspx") > 1) {
      let oldButton = document.querySelector("input[name='cmdSpecSubmit']");
      let newButton = document.createElement('a');
      newButton.href = 'https://www2.academichealthplans.com/school/7024.html';
      newButton.target = '_blank';
      newButton.innerHTML = '<input type="button" class="btn btn-primary" value="Waiver" />';

      oldButton.parentNode.replaceChild(newButton, oldButton);
    }

                < !--Change Health History headings-- >
                  if (window.location.href.toLowerCase().includes("healthhistory")) {

      document.body.innerHTML = document.body.innerHTML.replace('Medical Conditions', 'My Personal Social
                  History
                  and Medical Conditions');

                  document.body.innerHTML = document.body.innerHTML.replace('Family History', "My Family's Social
                  History and
                  Medical Conditions");

                  }

                  < !--Change Almost there... -->
                    if (window.location.href.toLowerCase().includes("appointments_book_confirm")) {

      document.body.innerHTML = document.body.innerHTML.replace('Almost There...', 'Booking
                    Confirmation');

                    }


                    < !--Delete new Survey heading-- >
                      if (window.location.href.toLowerCase().includes("survey/intro/")) {

      document.body.innerHTML = document.body.innerHTML.replace('Please complete the following clinical
                      survey,
        answering all questions: ', '');

                      }

                      < !--Remove appointment branches for employees / affiliates-- >
      removeBranches = function (selections) {
        selections.forEach((selection) => {
          document.querySelectorAll('fieldset span').forEach((span) => {
            if (span.getAttribute('title') === selection) {
              span.remove();
            }
          })
        });
      }

                        studentBranches = ['TeleHealth Appointments', 'SHS In-Clinic Appointments', 'COVID-19 Services
        (Testing and
                        Vaccinations) ', 'Flu Shots']
                        employeeBranches = ['Employee COVID-19 Testing', 'Employee COVID-19 Vaccination']

                        if (doesHeaderContainText('(EMP)') || doesHeaderContainText('(AFF)')) {

        removeBranches(studentBranches);

      } else {

        removeBranches(employeeBranches);

      }

                        < !--Remove student menu options for employees / affiliates-- >
                          < !--Add 'Profile' back in for Emps if needed-- >
        removeMenuOptions = function (links) {
          links.forEach((link) => {
            document.querySelectorAll('.nav-pills li').forEach((href) => {
              if (href.textContent == link) {
                href.remove();
              }
            })
          });
        }

    studentMenus = ['Health History', 'Groups/Workshops', 'Referrals', 'Forms', 'Insurance
                            Waivers', 'GAP
                            Enrollment(Waived Students)', 'Discharge Summaries', 'Immunizations Status', 'Online
                            Statements']

                            if (doesHeaderContainText('(EMP)') || doesHeaderContainText('(AFF)')) {

      removeMenuOptions(studentMenus);

    }

                            < !--Remove New Message button for employees and affiliates-- >
                              if (doesHeaderContainText('(EMP)') || doesHeaderContainText('(AFF)')) {

        if (window.location.href.toLowerCase().indexOf("messages_home.aspx") > 1) {
          var element = document.getElementById("cmdCompose");
          element.parentNode.removeChild(element);
        }

      }

                              < !--Add links to "you can't book" population text-- >
                                if
      (window.location.href.toLowerCase().includes("/appointments_book_list_available.aspx")) {

      document.body.innerHTML = document.body.innerHTML.replace('You are not in a population
                                that is eligible to
                                book this type of appointment.', 'You are not eligible to schedule this type of
                                appointment.For more
                                information, please visit this < a
                                  href = "https://studenthealth.sa.ucsb.edu/home/coronavirus/patient-portal-ineligibility-message"
                                  target = "_blank" rel = "noopener" > SHS web page</a >.');

                                  }

                                  < !--4 / 26 / 21, mcm, Change the Status buttons for COVID Vaccines(removed)-- >
                                    < !--8 / 26 / 21, mcm, Change the Status buttons for COVID Immunization
                                      Compliance-- >
                                      if (window.location.href.toLowerCase().includes("/clearances.aspx")) {
        let inprogress = "In Progress";
        let compliant = "Compliant";
        let notcompliant = "Not Compliant";
        let exempt = "Exempt";
        var immstatus =
          document.querySelectorAll('[data-code="IMCOV"]')[0].children[4].getAttribute("data-detail")

        if (immstatus.includes(inprogress)) {
          document.querySelectorAll('[data-code="IMCOV"]')[0].children[3].children.item(0).innerHTML
            = 'In Progress';
        } else if (immstatus.includes(notcompliant)) {
          document.querySelectorAll('[data-code="IMCOV"]')[0].children[3].children.item(0).innerHTML
            = 'Not Compliant';
        } else if (immstatus.includes(compliant)) {
          document.querySelectorAll('[data-code="IMCOV"]')[0].children[3].children.item(0).innerHTML
            = 'Compliant';
        } else if (immstatus.includes(exempt)) {
          document.querySelectorAll('[data-code="IMCOV"]')[0].children[3].children.item(0).innerHTML
            = 'Exempt';
        } else {
          document.querySelectorAll('[data-code="IMCOV"]')[0].children[3].children.item(0).innerHTML
            = 'Not Known';
        }
      }

                                      < !--8 / 26 / 21, mcm, get rid of a superfluos line, where did you come from. -- >
                                        < !--9 / 17 / 21 AJ, Commenting this out for now.nth - child(8) is removing
                                          questionnaire submit btn, and nth - child(7) is removing new message submit
    btn. -- >
                                          /* var empexereq = document.querySelector("#ctl03 > div:nth-child(8)")

                                          if(empexereq !== null && empexereq !== '') {
                                          empexereq.hidden = true
                                          }
                                          */

                                          < !--9 / 7 / 21, clicking "print" executes a ctrl + p in Medical Clearances
    page-- >
                                            if (document.querySelector("a.infol").getAttribute("href") ==
      'immunizations_print.aspx') {
      document.querySelector("a[href='immunizations_print.aspx']").setAttribute("href",
        "javascript:window.print()");
      document.querySelector("a.infol").setAttribute("target", "");
    }

  </script>
  <script>var pncIdlePeriodSec = 1800;</script><!-- SCRIPTS -->







</body>

</html>